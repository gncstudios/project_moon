{"version":3,"sources":["meteor://ðŸ’»app/client/templates/dashboard/dashboard.js"],"names":[],"mappings":"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","file":"/client/templates/dashboard/dashboard.js","sourcesContent":["\nTemplate.dashboard.rendered = function() {\n\n};\nTemplate.dashboard.created = function() {\n    this.data.search = new ReactiveVar(undefined);\n};\nlet dep = new Tracker.Dependency();\n\nTemplate.dashboard.events({\n  \"submit .add-item\": function (e) {\n\n    // Prevent default button click behavior\n    e.preventDefault();\n\n    // Insert the form data into the \"Items\" collection\n    Meetings.insert({\n      name: $(\"[name='name']\").val(),\n      cost: $(\"[name='cost']\").val() || 1.00,\n      lat: $(\"[name='lat']\").val(),\n      lng: $(\"[name='lng']\").val(),\n      owner: Meteor.userId()\n    });\n\n    // Hide the bootstrap modal once we submit the form\n    $('#addItemModal').modal('hide');\n  },\n  \"change #course-search, keyup #course-search\": function(e) {\n    //console.log(\"change\");\n    if(this.search === undefined) {\n      this.search = new ReactiveVar(\"\");\n    }\n    this.search.set(e.target.value);\n  //  console.log(this.search.get());\n  }\n\n});\n\nTemplate.dashboard.helpers({\n  exampleMapOptions: function() {\n    // Make sure the maps API has loaded\n    if (GoogleMaps.loaded()) {\n      // Map initialization options\n      return {\n        center: new google.maps.LatLng(33.7683, -118.1956),\n        zoom: 8\n      };\n\n    }\n  }\n});\nTemplate.dashboard.helpers({\n  myMeetings: function() {\n    return Meetings.find({owner: Meteor.userId()});\n  },\n  otherMeetings: function() {\n    //console.log(\"other\");\n    if(!this.search.get()) {\n      return Meetings.find();\n    }\n    var regex = new RegExp([this.search.get()].join(\"\"), \"i\");\n    //console.log(regex);\n    return Meetings.find({name: regex});\n  },\n  matches: function(str) {\n    dep.depend();\n    //console.log(\"Search term: \"+searchTerm);\n    var regex = new RegExp([\"/\", this.search.get() || \"/\"].join(\"\"), \"i\");\n    //console.log(regex);\n\n    return !searchTerm || str.match(regex);\n  }\n});\n\n\nTemplate.dashboard.onCreated(function() {\n  // We can use the `ready` callback to interact with the map API once the map is ready.\n  GoogleMaps.ready('exampleMap', function(map) {\n\nvar markers = {};\n\nMeetings.find().observe({  \n  added: function(document) {\n    // Create a marker for this document\n    var lat = document.lat;\n    var lng = document.lng;\n    if(lat && lng) {\n      var marker = new google.maps.Marker({\n        draggable: document.owner == Meteor.userId(),\n        animation: google.maps.Animation.DROP,\n        position: new google.maps.LatLng(lat, lng),\n        map: map.instance,\n        // We store the document _id on the marker in order \n        // to update the document within the 'dragend' event below.\n        id: document._id\n      });\n\n\n      // This listener lets us drag markers on the map and update their corresponding document.\n      google.maps.event.addListener(marker, 'dragend', function(event) {\n        Meetings.update(marker.id, { $set: { lat: event.latLng.lat(), lng: event.latLng.lng() }});\n      });\n      if(document._id) {\n      // Store this marker instance within the markers object.\n        markers[document._id] = marker;\n      } else {\n        console.log(\"no document _id??\");\n      }\n    }\n  },\n  changed: function(newDocument, oldDocument) {\n    if(markers[newDocument._id]) {\n      markers[newDocument._id].setPosition({ lat: newDocument.lat, lng: newDocument.lng });\n    }\n  },\n  removed: function(oldDocument) {\n  \n    console.log(oldDocument);\n    markers[oldDocument._id].setMap(null);\n\n    // Clear the event listener\n    google.maps.event.clearInstanceListeners(\n      markers[oldDocument._id]);\n\n    // Remove the reference to this marker instance\n    delete markers[oldDocument._id];\n  }\n});\n\n    $(\"[name='lat']\").val(map.options.center.lat()+Math.random()-0.5);\n    $(\"[name='lng']\").val(map.options.center.lng()+Math.random()-0.5);\n    //console.log(map.options.center);\n    for(let i = 0; false && i < 10; i++) {\n      setTimeout(function() {\n        let position = new google.maps.LatLng(map.options.center.lat()+Math.random()-0.5, map.options.center.lng()+Math.random()-0.5);\n        let marker = new google.maps.Marker({\n              draggable: true,\n              animation: google.maps.Animation.DROP,\n              position: position,\n              map: map.instance,\n              // We store the document _id on the marker in order \n              // to update the document within the 'dragend' event below.\n              id: i\n            });\n      }, 50*i);\n    }\n  });\n\n});"]}