{"version":3,"sources":["meteor://ðŸ’»app/packages/dburles_google-maps/packages/dburles_google-maps.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4G","file":"/packages/dburles_google-maps.js","sourcesContent":["(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                             //\n// packages/dburles:google-maps/template.google-maps.js                                        //\n//                                                                                             //\n/////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                               //\n                                                                                               // 1\nTemplate.__checkName(\"googleMap\");                                                             // 2\nTemplate[\"googleMap\"] = new Template(\"Template.googleMap\", (function() {                       // 3\n  var view = this;                                                                             // 4\n  return HTML.Raw('<div class=\"map-canvas\" style=\"width: 100%; height: 100%\"></div>');         // 5\n}));                                                                                           // 6\n                                                                                               // 7\n/////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                             //\n// packages/dburles:google-maps/google-maps.js                                                 //\n//                                                                                             //\n/////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                               //\nvar supportedTypes = ['Map', 'StreetViewPanorama'];                                            // 1\n                                                                                               // 2\nGoogleMaps = {                                                                                 // 3\n  load: _.once(function(options) {                                                             // 4\n    options = _.extend({ v: '3.exp' }, options);                                               // 5\n    var params = _.map(options, function(value, key) { return key + '=' + value; }).join('&'); // 6\n    var script = document.createElement('script');                                             // 7\n    script.type = 'text/javascript';                                                           // 8\n    script.src = 'https://maps.googleapis.com/maps/api/js?' + params +                         // 9\n      '&callback=GoogleMaps.initialize';                                                       // 10\n                                                                                               // 11\n    document.body.appendChild(script);                                                         // 12\n  }),                                                                                          // 13\n  utilityLibraries: [],                                                                        // 14\n  loadUtilityLibrary: function(path) {                                                         // 15\n    this.utilityLibraries.push(path);                                                          // 16\n  },                                                                                           // 17\n  _loaded: new ReactiveVar(false),                                                             // 18\n  loaded: function() {                                                                         // 19\n    return this._loaded.get();                                                                 // 20\n  },                                                                                           // 21\n  maps: {},                                                                                    // 22\n  _callbacks: {},                                                                              // 23\n  initialize: function() {                                                                     // 24\n    this._loaded.set(true);                                                                    // 25\n    _.each(this.utilityLibraries, function(path) {                                             // 26\n      var script = document.createElement('script');                                           // 27\n      script.type = 'text/javascript';                                                         // 28\n      script.src = path;                                                                       // 29\n                                                                                               // 30\n      document.body.appendChild(script);                                                       // 31\n    });                                                                                        // 32\n  },                                                                                           // 33\n  _ready: function(name, map) {                                                                // 34\n    _.each(this._callbacks[name], function(cb) {                                               // 35\n      if (_.isFunction(cb))                                                                    // 36\n        cb(map);                                                                               // 37\n    });                                                                                        // 38\n  },                                                                                           // 39\n  ready: function(name, cb) {                                                                  // 40\n    if (! this._callbacks[name])                                                               // 41\n      this._callbacks[name] = [];                                                              // 42\n    // make sure we run the callback only once                                                 // 43\n    // as the tilesloaded event will also run after initial load                               // 44\n    this._callbacks[name].push(_.once(cb));                                                    // 45\n  },                                                                                           // 46\n  // options: function(options) {                                                              // 47\n  //   var self = this;                                                                        // 48\n  //   return function() {                                                                     // 49\n  //     if (self.loaded())                                                                    // 50\n  //       return options();                                                                   // 51\n  //   };                                                                                      // 52\n  // },                                                                                        // 53\n  get: function(name) {                                                                        // 54\n    return this.maps[name];                                                                    // 55\n  },                                                                                           // 56\n  _create: function(name, options) {                                                           // 57\n    var self = this;                                                                           // 58\n    self.maps[name] = {                                                                        // 59\n      instance: options.instance,                                                              // 60\n      options: options.options                                                                 // 61\n    };                                                                                         // 62\n                                                                                               // 63\n    if (options.type === 'StreetViewPanorama') {                                               // 64\n      options.instance.setVisible(true);                                                       // 65\n      self._ready(name, self.maps[name]);                                                      // 66\n    } else {                                                                                   // 67\n      google.maps.event.addListener(options.instance, 'tilesloaded', function() {              // 68\n        self._ready(name, self.maps[name]);                                                    // 69\n      });                                                                                      // 70\n    }                                                                                          // 71\n  },                                                                                           // 72\n  create: function(options) {                                                                  // 73\n    // default to Map                                                                          // 74\n    var type = options.type ? options.type : 'Map';                                            // 75\n    if (! _.include(supportedTypes, type))                                                     // 76\n      throw new Meteor.Error(\"GoogleMaps - Invalid type argument: \" + type);                   // 77\n                                                                                               // 78\n    this._create(options.name, {                                                               // 79\n      type: type,                                                                              // 80\n      instance: new google.maps[type](options.element, options.options),                       // 81\n      options: options.options                                                                 // 82\n    });                                                                                        // 83\n  }                                                                                            // 84\n};                                                                                             // 85\n                                                                                               // 86\nTemplate.googleMap.onRendered(function() {                                                     // 87\n  var self = this;                                                                             // 88\n  self.autorun(function(c) {                                                                   // 89\n    // if the api has loaded                                                                   // 90\n    if (GoogleMaps.loaded()) {                                                                 // 91\n      var data = Template.currentData();                                                       // 92\n                                                                                               // 93\n      if (! data.options)                                                                      // 94\n        return;                                                                                // 95\n      if (! data.name)                                                                         // 96\n        throw new Meteor.Error(\"GoogleMaps - Missing argument: name\");                         // 97\n                                                                                               // 98\n      self._name = data.name;                                                                  // 99\n                                                                                               // 100\n      var canvas = self.$('.map-canvas').get(0);                                               // 101\n                                                                                               // 102\n      GoogleMaps.create({                                                                      // 103\n        name: data.name,                                                                       // 104\n        type: data.type,                                                                       // 105\n        element: canvas,                                                                       // 106\n        options: data.options                                                                  // 107\n      });                                                                                      // 108\n                                                                                               // 109\n      c.stop();                                                                                // 110\n    }                                                                                          // 111\n  });                                                                                          // 112\n});                                                                                            // 113\n                                                                                               // 114\nTemplate.googleMap.onDestroyed(function() {                                                    // 115\n  google.maps.event.clearInstanceListeners(GoogleMaps.maps[this._name].instance);              // 116\n  delete GoogleMaps.maps[this._name];                                                          // 117\n});                                                                                            // 118\n                                                                                               // 119\n/////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}